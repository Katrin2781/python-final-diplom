# Дипломная работа к профессии Python-разработчик «API Сервис заказа товаров для розничных сетей».

## Описание

Приложение предназначено для автоматизации закупок в розничной сети. Пользователи сервиса — покупатель (менеджер торговой сети, который закупает товары для продажи в магазине) и поставщик товаров.

**Клиент (покупатель):**

- Менеджер закупок через API делает ежедневные закупки по каталогу, в котором
  представлены товары от нескольких поставщиков.
- В одном заказе можно указать товары от разных поставщиков — это
  повлияет на стоимость доставки.
- Пользователь может авторизироваться, регистрироваться и восстанавливать пароль через API.
    
**Поставщик:**

- Через API информирует сервис об обновлении прайса.
- Может включать и отключать прием заказов.
- Может получать список оформленных заказов (с товарами из его прайса).


### Чтобы запустить проект необходимо:

- Создать и активировать виртуальное окружение, установить зависимости:

```
pip install -r requirements.txt
```
- Создать базу данных **PostgreSQL**:
```
createdb -U postgres shop_db
```

- Создать файл .env и определить в нем следующие переменные окружения:

| Имя переменной  | Описание значения переменной                                                                                     |
|-----------------|------------------------------------------------------------------------------------------------------------------|
| DEBUG           | Режим отладки проекта, по умолчанию True или 1                                                                   |
| SECRET_KEY      | Секретный ключ проекта, любой произвольный набор символов                                                        |
| PS_DB           | Имя базы данных, по умолчанию *orders_db*                                                                        |
| PG_USER         | Имя пользователя для подключения к базе данных, по умолчанию *postgres*                                          |
| PG_PASSWORD     | Пароль пользователя для подключения к базе данных, по умолчанию *postgres*                                       |
| PG_HOST         | Имя хоста для подключения проекта к БД, по умолчанию *127.0.0.1*                                                 |
| PG_PORT         | Порт для подключения к БД, по умолчанию 5432                                                                     |
| EMAIL_HOST      | Почтовый сервер для отправки писем пользователю, для mail.ru (smtp.mail.ru),<br/> для gmail.com (smtp.gmail.com) |
| EMAIL_PORT      | Порт почтового сервера, для mail.ru 2525, для gmail.com 587                                                      |
| EMAIL_HOST_USER | Почтовый адрес пользователя                                                                                      |
| EMAIL_HOST_PASS | Пароль от приложения на почтовом сервере пользователя                                                            |

- Выполнить миграции и создать суперпользователя:

```
manage.py makemigrations && manage.py migrate
manage.py createsuperuser
```

- Запустить образ Redis через Docker выполнив команду:

```
docker-compose up
```

- Выполнить команду во втором терминале:

```
celery -A orders worker -l INFO
```

- Выполнить команду:

```
python manage.py runserver
```
